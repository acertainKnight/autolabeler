{
  "project_name": "speaker_independence_with_rules",
  "data_context": {
    "source_data": "datasets/stacked_headline_scores_simple.csv"
  },
  "tasks": [
    {
      "name": "SplitData",
      "type": "split_data",
      "params": {
        "df_key": "source_data",
        "output_train_df_key": "train_data",
        "output_test_df_key": "test_data",
        "test_size": 0.2,
        "stratify_column": "score"
      }
    },
    {
      "name": "AddTrainingData",
      "type": "add_training_data",
      "params": {
        "df_key": "train_data",
        "text_column": "headline",
        "label_column": "score"
      }
    },
    {
      "name": "LabelWithRulesAndRAG",
      "type": "label",
      "params": {
        "df_key": "test_data",
        "output_df_key": "labeled_data",
        "text_column": "headline",
        "ruleset_path": "rulesets/cb_independence_ruleset_20250610_161047.json",
        "labeling_config": {
          "use_rag": true,
          "k_examples": 50,
          "model_name": "google/gemini-2.5-flash-preview-05-20"
        },
        "batch_config": {
          "batch_size": 100,
          "workers": 10
        }
      }
    },
    {
      "name": "EvaluateResults",
      "type": "evaluate",
      "params": {
        "df_key": "labeled_data",
        "true_label_column": "score",
        "pred_label_column": "predicted_label",
        "output_report_path": "results/speaker_independence_rules_report.md"
      }
    },
    {
      "name": "SaveLabeledData",
      "type": "save_data",
      "params": {
        "df_key": "labeled_data",
        "output_file": "results/speaker_independence_rules_output.csv"
      }
    }
  ]
}
